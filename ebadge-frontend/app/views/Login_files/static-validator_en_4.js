function validateIntRange(b){var p=true;var g=null;var f=0;var e=[];var h=[];var k=[];var n=ECAS.forms[jcv_retrieveFormName(b)];for(var o in n){if(!n.hasOwnProperty(o)){continue}var c=n[o];if(c&&c.rules){var q=c.rules.intRange;if(q){var j=b[o];if(jcv_isFieldPresent(j)){j=jcv_getField(j);var m=jcv_getFieldValue(j);if(m.length>0){var a=parseInt(c.variables.min);var d=parseInt(c.variables.max);var l=parseInt(m,10);if(!(l>=a&&l<=d)){if(f==0){g=j}e[f++]=q;p=false;h.push(j);j.iMin=a;j.iMax=d;k.push(function(){var i=jcv_getFieldValue(this);if(i.length===0){return true}var r=parseInt(i,10);return r>=this.iMin&&r<=this.iMax})}}}}}}if(e.length>0){jcv_handleErrors(e,g,h,k)}return p}function jcv_retrieveFormName(b){var a;if(b.getAttributeNode){if(b.getAttributeNode("id")&&b.getAttributeNode("id").value){a=b.getAttributeNode("id").value}else{a=b.getAttributeNode("name").value}}else{if(b.getAttribute){if(b.getAttribute("id")){a=b.getAttribute("id")}else{a=b.attributes.name}}else{if(b.id){a=b.id}else{a=b.name}}}a=a.replace(/:/gi,"_");return a}function jcv_getField(c){if(!jcv_isFieldPresent(c)){return null}if(typeof c.item!=="undefined"){for(var a=0,d=c.length;a<d;a++){var b=c.item(a);if(b==null||(typeof b=="undefined")||b.disabled){continue}else{if(b.type=="radio"||b.type=="checkbox"){if(b.checked){c=b;break}}else{c=b;break}}}}return c}function jcv_getFieldValue(g){if(!jcv_isFieldPresent(g)){return null}g=jcv_getField(g);var f="";if((g.type=="hidden"||g.type=="text"||g.type=="textarea"||g.type=="file"||g.type=="radio"||g.type=="checkbox"||g.type=="select-one"||g.type=="password")){if(g.type=="select-one"){var c=g.selectedIndex;if(c>=0){f=g.options[c].value}}else{if(g.type=="radio"||g.type=="checkbox"){if(g.checked){f=g.value}}else{f=g.value}}}else{if(g.type=="select-multiple"){var b=g.options.length;var e=-1;for(var d=b-1;d>=0;d--){if(g.options[d].selected){e=d;f=g.options[d].value;break}}}else{if((g.length>0)&&(g[0].type=="radio"||g[0].type=="checkbox")){var h=-1;for(var a=0;a<g.length;a++){if(g[a].checked){h=a;f=g[a].value;break}}}}}return f}(function(a){if(a.validator){return}a.validator={};a.validator.dispatchEvent=function(b,c){if(document.createEvent){b.dispatchEvent(c)}else{b.fireEvent("on"+c.eventType,c)}};a.validator.dispatchNewEvent=function(d,c,b){var e;if(document.createEvent){e=document.createEvent("HTMLEvents");e.initEvent(c,true,true)}else{e=document.createEventObject();e.eventType=c}e.eventName=c;e.forwardedBy=b;a.validator.dispatchEvent(d,e)};a.validator.containsMessage=function(d,c){if(!d.conditions){d.conditions=[];return false}for(var b=0,e=d.conditions.length;b<e;b++){if(d.conditions[b].message===c){return true}}return false};a.validator.appendElement=function(c,b){if(c.nextSibling){if(c.parentNode.contains(b)){return}c.parentNode.insertBefore(b,c.nextSibling)}else{c.parentNode.appendChild(b)}};a.validator.removeElement=function(b){if(b.parentNode){b.parentNode.removeChild(b)}};a.validator.replaceElement=function(c,b){if(b.parentNode){b.parentNode.replaceChild(c,b)}};a.validator.replaceInputType=function(e,d){try{e.type=d;if(e.type===d){return e}}catch(c){}var f=document.createElement("input");f.type=d;for(var b in e){if(!e.hasOwnProperty(b)||b=="type"){continue}f[b]=e[b]}a.validator.replaceElement(f,e);return f};a.validator.createErrorElement=function(d,e){var c=document.createElement("ul");c.className="error clientError";var b=document.createElement("li");b.appendChild(document.createTextNode(d));c.appendChild(b);return c};a.validator.addErrorStyle=function(b){if(typeof b.classList!=="undefined"){b.classList.add("errorField")}else{if(!b.pushedClasses){b.pushedClasses=b.className}b.className=b.pushedClasses+" errorField"}};a.validator.removeErrorStyle=function(b){if(typeof b.classList!=="undefined"){b.classList.remove("errorField")}else{if(b.pushedClasses){b.className=b.pushedClasses}}};a.validator.handleFocus=function(d){var f=false;for(var b=0,e=this.conditions.length;b<e;b++){var c=this.conditions[b];if(!c.condition.call(this)){if(!f){a.validator.appendElement(this,c.element)}f=true}}if(f){a.validator.addErrorStyle(this)}else{a.validator.removeErrorStyle(this)}if(this.confirmedBy&&!d.forwardedBy){a.validator.dispatchNewEvent(this.form[this.confirmedBy],"blur",this)}};a.validator.handleBlur=function(d){var f=false;for(var b=0,e=this.conditions.length;b<e;b++){var c=this.conditions[b];a.validator.removeElement(c.element);if(!c.condition.call(this)){f=true}}if(f){a.validator.addErrorStyle(this)}else{a.validator.removeErrorStyle(this)}if(this.confirmedBy&&!d.forwardedBy){a.validator.dispatchNewEvent(this.form[this.confirmedBy],"blur",this)}};a.validator.handleField=function(c,d,e){if(d&&d!=null&&jcv_isEditable(d)){if(a.validator.containsMessage(d,c)){return true}var b=a.validator.createErrorElement(c,d);a.validator.addErrorStyle(d);d.conditions.push({message:c,element:b,condition:e});if(d.conditionsEnabled){return true}d.onfocus=a.validator.handleFocus;d.onblur=a.validator.handleBlur;d.conditionsEnabled=true;return true}return false}})(window.ECAS=window.ECAS||{});function jcv_handleErrors(c,b,a,f){try{jcv_processErrors(c,b,a,f)}catch(d){if(console.error){console.error(d,d.stack)}else{console.log(d);if(d.stack){console.log(d.stack)}}}}function jcv_isEditable(c){if(c.disabled||c.type==="hidden"){return false}if(c.style){if(c.style.visibility&&c.style.visibility==="hidden"){return false}if(c.style.display&&c.style.display==="none"){return false}if($){var b=$(c);if(b){if(b.css("visibility")==="hidden"){return false}if(b.css("display")==="none"){return false}}}if("function"===typeof window.getComputedStyle){var a=window.getComputedStyle(c);if(a.getPropertyValue("visibility")==="hidden"){return false}if(a.getPropertyValue("display")==="none"){return false}}}return true}function jcv_processErrors(c,f,g,k){function j(){return true}var d=[];for(var e=0;e<c.length;e++){var h=false;if(g&&g.length&&g.length>e){var b=j;if(k&&k.length&&k.length>e){b=k[e]}h=ECAS.validator.handleField(c[e],g[e],b)}if(!h){d.push(c[e])}}if(f&&f!=null){if(jcv_isEditable(f)){var a=document.activeElement;if(a===f){f.blur()}f.focus()}}if(d.length>0){alert(d.join("\n"))}}function jcv_verifyArrayElement(a,b){if(b&&b.length&&b.length==3){return true}else{return false}}function jcv_isFieldPresent(d){var a=true;if(d==null||(typeof d=="undefined")){a=false}else{if(typeof d.item!=="undefined"){var e=false;for(var b=0,g=d.length;b<g;b++){var c=d.item(b);if(c==null||(typeof c=="undefined")||c.disabled){continue}else{if(c.type=="radio"||c.type=="checkbox"){if(c.checked){e=true;break}}else{e=true;break}}}if(!e){a=false}}else{if(d.disabled){a=false}}}return a}function jcv_isAllDigits(b){b=b.toString();var a="0123456789";var c=0;if(b.substring(0,2)=="0x"){a="0123456789abcdefABCDEF";c=2}else{if(b.charAt(0)=="0"){a="01234567";c=1}else{if(b.charAt(0)=="-"){c=1}}}for(var d=c;d<b.length;d++){if(a.indexOf(b.substring(d,d+1))==-1){return false}}return true}function jcv_isDecimalDigits(b){b=b.toString();var a="0123456789";var c=0;if(b.charAt(0)=="-"){c=1}for(var d=c;d<b.length;d++){if(a.indexOf(b.substring(d,d+1))==-1){return false}}return true}function trim(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}function jcv_focusFirstEditable(e){var a=e;if(typeof e==="string"){a=document.forms[e]}if(a){var h=$(a).find(":input");for(var c=0,g=h.length;c<g;c++){var b=h[c];if(jcv_isEditable(b)){var f=$(b);if(f.val().length===0){var d=document.activeElement;if(d===b){f.blur()}f.focus();break}}}}}function isDefined(a){return"undefined"!==typeof a}var getCharCodeFunction=null;function getCharCode(a){if(null===getCharCodeFunction){var b=(a?a:window.event);if(window.event&&isDefined(b.keyCode)){getCharCodeFunction=function(c){return(c?c:window.event).keyCode}}else{if(isDefined(b.which)){getCharCodeFunction=function(c){return(c?c:window.event).which}}else{if(isDefined(b.charCode)){getCharCodeFunction=function(c){return(c?c:window.event).charCode}}else{if(isDefined(b.keyCode)){getCharCodeFunction=function(c){return(c?c:window.event).keyCode}}}}}}return getCharCodeFunction(a)}function handleInputKeyEvent(f,c,d,e){var a=getCharCode(f||null);var b=String.fromCharCode(a);var g=(f?f:window.event);if(g.ctrlKey&&/^[acvx]$/.test(b)){return true}switch(a){case 13:if(d){$(c.form).submit()}return false;case 0:case 8:case 9:case 11:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 27:case 127:case 144:return true;default:return e(a,b,f,c)}}function handleInputKeyPressed(b,a,c){return handleInputKeyEvent(b,a,true,function(d,e){return c.test(e)})}function splitInputToMultiBox(b,o,w,f,l){function v(g){return document.getElementById(g)}function d(p,g){var C="";for(var A=0;A<g;A++){var B=v(p+"-"+A);if(B){C+=B.value}}var z=v(p);if(z){z.value=C}}function j(i,g){return handleInputKeyEvent(i,g,false,function(p,A,D,z){if(z.value.length===z.maxLength){var C=z.id.lastIndexOf("-");if(C!==-1){var E=z.id.substring(0,C);var F=parseInt(z.id.substring(C+1))+1;var B=v(E+"-"+F);if(B){B.focus()}}}return false})}var e=b.id;var k=b.value.split(f).join("").match(new RegExp(".{1,"+o+"}","g"));var u=$(b);var y=" "+f+" ";var c=ECAS.forms[jcv_retrieveFormName(b.form)];var s=null;if(c){s=c[e]}for(var t=0;t<w;t++){var r=e+"-"+t;var n="";if(k&&!$.isBlank(k[t])){n=k[t]}var m=document.createElement("input");m.setAttribute("type","text");m.setAttribute("id",r);m.setAttribute("name",r);m.setAttribute("maxlength",o);m.setAttribute("size",o+1);m.setAttribute("value",n);if(b.style&&b.style.cssText){m.style.cssText=b.style.cssText}m.className=l+" "+b.className;m.onkeypress=b.onkeypress;if(s){c[r]={};var x=c[r];for(var q in s){if(!s.hasOwnProperty(q)){continue}x[q]=s[q]}}m.onkeyup=function(g){d(e,w);return j(g,this)};var h=function(){d(e,w)};m.onchange=h;m.oninput=h;var a=$(m);u.after(a);u=a;if(t!=0){u.before(y)}}if(s){delete c[e]}ECAS.validator.replaceInputType(b,"hidden");$("#"+e+"-0").focus()}function validateMaxLength(c){var r=true;var l=null;var t=0;var v=[];var n=[];var h=[];var e=ECAS.forms[jcv_retrieveFormName(c)];for(var d in e){if(!e.hasOwnProperty(d)){continue}var s=e[d];if(s&&s.rules){var k=s.rules.maxlength;if(k){var b=c[d];if(!jcv_isFieldPresent(b)){continue}b=jcv_getField(b);var p=jcv_getFieldValue(b);if(p.length>0){var j=s.variables.lineEndLength;var u=0;if(j){var m=0;var a=0;var o=0;while(o<p.length){var g=p.charAt(o);if(g=="\r"){m++}if(g=="\n"){a++}o++}var f=parseInt(j);u=(a*f)-(m+a)}var q=parseInt(s.variables.maxlength);if((p.length+u)>q){if(t==0){l=b}v[t++]=k;n.push(b);r=false;b.adjustAmount=u;b.iMax=q;h.push(function(){var i=jcv_getFieldValue(this);if(i.length===0){return true}return(i.length+this.adjustAmount)<=this.iMax})}}}}}if(v.length>0){jcv_handleErrors(v,l,n,h)}return r}function validateConfirmedBy(a){function c(){return jcv_getFieldValue(this)===jcv_getFieldValue(this.form[this.confirmedBy])}var o=true;var f=null;var e=0;var d=[];var h=[];var k=[];var m=ECAS.forms[jcv_retrieveFormName(a)];for(var n in m){if(!m.hasOwnProperty(n)){continue}var b=m[n];if(b&&b.rules){var q=b.rules.confirmedBy;if(q){var j=a[n];if(!jcv_isFieldPresent(j)){continue}j=jcv_getField(j);var l=jcv_getFieldValue(j);if(l.length>0){var g=b.variables.confirmedBy;var p=a[g];if(!jcv_isFieldPresent(p)){continue}p=jcv_getField(p);if(l!==jcv_getFieldValue(p)){if(e==0){f=p}d[e++]=q;h.push(j);o=false;j.confirmedBy=g;k.push(c);d[e++]=q;h.push(p);p.confirmedBy=j.name;k.push(c)}}}}}if(d.length>0){jcv_handleErrors(d,f,h,k)}return o}function validateInteger(a){function n(i){if(!jcv_isDecimalDigits(i)){return false}var p=parseInt(i,10);return !isNaN(p)&&(p>=-2147483648&&p<=2147483647)}var m=true;var e=null;var d=0;var c=[];var f=[];var h=[];var k=ECAS.forms[jcv_retrieveFormName(a)];for(var l in k){if(!k.hasOwnProperty(l)){continue}var b=k[l];if(b&&b.rules){var o=b.rules.IntegerValidations;if(o){var g=a[l];if(!jcv_isFieldPresent(g)){continue}g=jcv_getField(g);var j=jcv_getFieldValue(g);if(j.length>0){if(!n(j)){m=false;if(d==0){e=g}c[d++]=o;f.push(g);h.push(function(){var i=jcv_getFieldValue(this);if(i.length===0){return true}return n(i)})}}}}}if(c.length>0){jcv_handleErrors(c,e,f,h)}return m}function validateRequired(a){function h(t){var s="";if(t.type=="select-one"){var i=t.selectedIndex;if(i>=0){s=t.options[i].value}}else{if(t.type=="radio"||t.type=="checkbox"){if(t.checked){s=t.value}}else{s=t.value}}return s}var q=true;var f=null;var e=0;var d=[];var g=[];var l=[];var n=ECAS.forms[jcv_retrieveFormName(a)];for(var o in n){if(!n.hasOwnProperty(o)){continue}var b=n[o];if(b&&b.rules){var r=b.rules.required;if(r){var k=a[o];if(!jcv_isFieldPresent(k)){}else{if((k.type=="hidden"||k.type=="text"||k.type=="textarea"||k.type=="file"||k.type=="radio"||k.type=="checkbox"||k.type=="select-one"||k.type=="password")){var m=h(k);if(trim(m).length==0){if((e==0)&&(k.type!="hidden")){f=k}d[e++]=r;g.push(k);q=false;l.push(function(){return trim(h(this)).length!==0})}}else{if(k.type=="select-multiple"){var p=k.options.length;var j=-1;for(loop=p-1;loop>=0;loop--){if(k.options[loop].selected){j=loop;m=k.options[loop].value;break}}if(j<0||trim(m).length==0){if(e==0){f=k}d[e++]=r;g.push(k);q=false;l.push(function(){var s=this.options.length;var u=-1;var t="";for(var i=s-1;i>=0;i--){if(this.options[i].selected){u=i;t=this.options[i].value;break}}return u>=0&&trim(t).length!==0})}}else{if((k.length>0)&&(k[0].type=="radio"||k[0].type=="checkbox")){var c=-1;for(loop=0;loop<k.length;loop++){if(k[loop].checked){c=loop;break}}if(c<0){if(e==0){f=k[0]}d[e++]=r;g.push(k);q=false;l.push(function(){var s=-1;for(var i=0;i<this.length;i++){if(this[i].checked){s=i;break}}return s>=0})}}}}}}}}if(d.length>0){jcv_handleErrors(d,f,g,l)}return q}function validateEmail(a){var m=true;var e=null;var d=0;var c=[];var f=[];var h=[];var k=ECAS.forms[jcv_retrieveFormName(a)];for(var l in k){if(!k.hasOwnProperty(l)){continue}var b=k[l];if(b&&b.rules){var n=b.rules.email;if(n){var g=a[l];if(!jcv_isFieldPresent(g)){continue}g=jcv_getField(g);var j=jcv_getFieldValue(g);if(j.length>0){if(!jcv_checkEmail(g.value)){if(d==0){e=g}c[d++]=n;f.push(g);m=false;h.push(function(){return jcv_checkEmail(jcv_getFieldValue(this))})}}}}}if(c.length>0){jcv_handleErrors(c,e,f,h)}return m}function jcv_checkEmail(b){if(b.length==0){return true}var r=0;var u=/^(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum)$/;var q=/^(.+)@(.+)$/;var o='\\(\\)><@,;:\\\\\\"\\.\\[\\]';var j="[^\\s"+o+"]";var d='("[^"]*")';var p=/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/;var a=j+"+";var n="("+a+"|"+d+")";var k=new RegExp("^"+n+"(\\."+n+")*$");var f=new RegExp("^"+a+"(\\."+a+")*$");var c=b.match(q);if(c==null){return false}var s=c[1];var t=c[2];for(l=0;l<s.length;l++){if(s.charCodeAt(l)>127){return false}}for(l=0;l<t.length;l++){if(t.charCodeAt(l)>127){return false}}if(s.match(k)==null){return false}var h=t.match(p);if(h!=null){for(var l=1;l<=4;l++){if(h[l]>255){return false}}return true}var g=new RegExp("^"+a+"$");var e=t.split(".");var m=e.length;for(l=0;l<m;l++){if(e[l].search(g)==-1){return false}}if(r&&e[e.length-1].length!=2&&e[e.length-1].search(u)==-1){return false}if(m<2){return false}return true}function validateMask(a){function e(){var i=jcv_getFieldValue(this);if(i.length===0){return true}return this.mask.test(i)}var n=true;var f=null;var d=0;var c=[];var g=[];var j=[];var l=ECAS.forms[jcv_retrieveFormName(a)];for(var m in l){if(!l.hasOwnProperty(m)){continue}var b=l[m];if(b&&b.rules){var p=b.rules.mask;if(p){var h=a[m];if(!jcv_isFieldPresent(h)){continue}h=jcv_getField(h);var k=jcv_getFieldValue(h);if(k.length>0){var o=b.variables.mask;if(!jcv_matchPattern(h.value,o)){if(d==0){f=h}c[d++]=p;g.push(h);n=false;h.mask=o;j.push(e)}}}}}if(c.length>0){jcv_handleErrors(c,f,g,j)}return n}function jcv_matchPattern(b,a){return a.test(b)}function getCancelButtons(f){if(f.getElementsByClassName){return f.getElementsByClassName("cancellable")}var d=[];var c=f.getElementsByTagName("input");for(var b=0;b<c.length;b++){var a=c[b].getAttribute("type");if(a==="submit"){if(/(?:.*\s)?cancellable(?:\s.*)?/g.test(c[b].className)){d.push(c[b])}}}return d}function isCancelled(a){return typeof a.data==="object"&&a.data&&a.data.cancelled&&a.data.cancelled===true}function confirmForm(b,a){if(isCancelled(b)){return true}if(confirm(a)){return true}if(typeof b.data==="object"&&b.data){b.data.clicks=0}return false}function getConfirmationFields(f){if(f.getElementsByClassName){return f.getElementsByClassName("confirmationField")}var d=[];var c=f.getElementsByTagName("input");for(var b=0;b<c.length;b++){var a=c[b].getAttribute("type");if(a!=="submit"){if(/(?:.*\s)?confirmationField(?:\s.*)?/g.test(c[b].className)){d.push(c[b])}}}return d}var ecas_url_prefix="https://ecas.ec.europa.eu/cas";var ajax_error_xhr="Your browser does not support XMLHTTPRequest...";var locval_url="/cas/locval";